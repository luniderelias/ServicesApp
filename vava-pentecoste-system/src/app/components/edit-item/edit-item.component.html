<section class="row mt-5" *ngIf="isAdmin">
    <img *ngIf="loading" class="center-spinner" src="assets/spinner.gif" />
    <div class="col">
        <form (submit)="showQuestion()" ngNativeValidate>
            <div class="form-group">
                <label>Código</label>
                <input class="form-control" type="text" [(ngModel)]="product_id" name="product_id" required>
            </div>

            <div class="form-group">
                <label>Nome</label>
                <input class="form-control" type="text" [(ngModel)]="name" name="name" required>
            </div>

            <div class="form-group">
                <label>Categoria</label>

                <select class="form-control" type="text" [(ngModel)]="categories" name="categories" required>
                                          <option *ngFor="let category of categoryList" [value]="category.$key">{{category.cat_name}}</option>
        
                        </select>

            </div>


            <div class="form-group">
                <label>Descrição</label>
                <input class="form-control" type="text" [(ngModel)]="description" name="description" required>
            </div>


            <div class="form-group" *ngIf="!this.inputImageUser?.nativeElement.value" style="margin-top: 20px">

                <img style="width:25%" class="thumbnail" src="{{image_firebase_url}}">


            </div>

            <div class="form-group" *ngIf="this.inputImageUser?.nativeElement.value" style="margin-top: 20px">

                <img style="width:25%" class="thumbnail" src="{{this.inputImageUser?.nativeElement.value}}">


            </div>

            <hr>
            <div class="form-group">
                <h5>Selecionar Imagem:</h5>
                <input type="file" accept=".png, .jpg" (change)="onUpload($event)">
            </div>
            <div class="progress">
                <div [style.visibility]="(uploadPercent == 0) ? 'hidden' : 'visible'" class="progress-bar progress-bar-striped bg-success" role="progressbar" [style.width]="(uploadPercent | async) +'%'">

                </div>
            </div>
            <br>
            <input #imageUser type="hidden" [value]="urlImage | async">

            <div class="form-group">
                <label>Popularidade</label>
                <input class="form-control" type="number" [(ngModel)]="popularity" name="popularity" required>
            </div>

            <div class="form-group">
                <label>Preço</label>
                <input class="form-control" type="number" [(ngModel)]="price" name="price" required>
            </div>

            <div class="form-group">
                <label>Estoque</label>
                <input class="form-control" type="number" [(ngModel)]="stock" name="stock" required>
            </div>

            <div class="modal-footer">
                <button class="btn btn-raised mr-1 btn-round shadow-z-2 btn-secondary" [routerLink]="['/produtos/detalhes/'+id]">Voltar</button>
                <button type="submit" class="btn btn-raised mr-1 btn-round shadow-z-2 btn-primary">Salvar</button>
            </div>
        </form>
    </div>
</section>